{
  "version": 3,
  "sources": ["../common/map.ts", "../select/select_front.ts", "../result/result_front.ts"],
  "sourcesContent": ["/// <reference lib=\"dom\" />\r\n\r\nimport L from \"https://code4sabae.github.io/leaflet-mjs/leaflet.mjs\";\r\n\r\nconst tile = \"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png\";\r\nconst attribution =\r\n  '<a href=\"https://maps.gsi.go.jp/development/ichiran.html\">\u56FD\u571F\u5730\u7406\u9662</a>';\r\nconst maxZoom = 18;\r\nconst opt = { attribution, maxZoom };\r\n\r\n// \u5730\u56F3\u3092\u8868\u793A\r\n// https://leafletjs.com/reference.html\r\nexport function showMap(\r\n  id: string,\r\n  latlon = [35.91172, 136.187928],\r\n  zoom = 15,\r\n) {\r\n  const map = L.map(id).setView(latlon, zoom);\r\n  L.tileLayer(tile, opt).addTo(map);\r\n  return map;\r\n}\r\n\r\nexport { L };\r\n", "/// <reference lib=\"dom\" />\r\n\r\nimport { L, showMap } from \"../common/map.ts\";\r\n\r\nexport function select() {\r\n  const selectMsg = document.getElementById(\"select-msg\")!;\r\n  const fromLat = document.getElementById(\"from-lat\") as HTMLInputElement;\r\n  const fromLng = document.getElementById(\"from-lng\") as HTMLInputElement;\r\n  const toLat = document.getElementById(\"to-lat\") as HTMLInputElement;\r\n  const toLng = document.getElementById(\"to-lng\") as HTMLInputElement;\r\n  const ok = document.getElementById(\"ok\")!;\r\n  const submit = document.getElementById(\"submit\")!;\r\n\r\n  // \u5730\u56F3\r\n  const map = showMap(\"map\");\r\n\r\n  let homeSelected = false;\r\n  let homeMarker: any;\r\n  let schoolMarker: any;\r\n  map.on(\"click\", (e: any) => {\r\n    if (!homeSelected) {\r\n      // \u51FA\u767A\u5730\u9078\u629E\r\n      if (homeMarker) {\r\n        map.removeLayer(homeMarker);\r\n      } else {\r\n        ok.style.display = \"inline\";\r\n      }\r\n      homeMarker = new L.Marker(e.latlng).addTo(map);\r\n      fromLat.value = e.latlng.lat;\r\n      fromLng.value = e.latlng.lng;\r\n    } else {\r\n      // \u5230\u7740\u5730\u9078\u629E\r\n      if (schoolMarker) {\r\n        map.removeLayer(schoolMarker);\r\n      } else {\r\n        submit.style.display = \"inline\";\r\n      }\r\n      schoolMarker = new L.Marker(e.latlng).addTo(map);\r\n      toLat.value = e.latlng.lat;\r\n      toLng.value = e.latlng.lng;\r\n    }\r\n  });\r\n\r\n  ok.onclick = () => {\r\n    selectMsg.textContent = \"\u76EE\u7684\u5730\u3092\u30BF\u30C3\u30D7\u3057\u3066\u304F\u3060\u3055\u3044\";\r\n    ok.style.display = \"none\";\r\n    homeSelected = true;\r\n  };\r\n}\r\n", "/// <reference lib=\"dom\" />\r\n\r\nimport { L, showMap } from \"../common/map.ts\";\r\n\r\nexport function result() {\r\n  const mapE = document.getElementById(\"map\")! as HTMLElement;\r\n  const showRanking = document.getElementById(\"show-ranking\")!;\r\n\r\n  const line = JSON.parse(mapE.dataset.line!);\r\n  const dangerSpots = JSON.parse(mapE.dataset.dangerSpots!);\r\n\r\n  const map = showMap(\"map\");\r\n  const opt = {\r\n    \"color\": \"#FF0000\",\r\n    \"weight\": 5,\r\n    \"opacity\": 0.6,\r\n  };\r\n  L.polyline(line, opt).addTo(map);\r\n\r\n  // \u5371\u967A\u5730\u5E2F\u8868\u793A\r\n  const bindOpt = {\r\n    permanent: true,\r\n    className: \"my-label\",\r\n    offset: [1, 1],\r\n  };\r\n\r\n  let i = 1;\r\n\r\n  const LeafIcon = L.Icon.extend({\r\n    options: {\r\n      iconSize: [20, 20],\r\n      iconAnchor: [20, 10],\r\n    },\r\n  });\r\n\r\n  const icon = new LeafIcon({\r\n    iconUrl: \"warning.png\",\r\n  });\r\n  for (const spot of dangerSpots) {\r\n    const txt = spot.txt.replaceAll(\"\\n\", \"<br>\");\r\n    new L.Marker([spot.lat, spot.lng], { icon })\r\n      .bindPopup(txt)\r\n      .bindTooltip(\"\" + i, bindOpt)\r\n      .addTo(map);\r\n    i++;\r\n  }\r\n\r\n  showRanking.onclick = () => {\r\n    const data = [\r\n      {\r\n        img: \"1.png\",\r\n        txt: \"\u770C\u9053212\u53F7\u3068\u65E5\u91CE\u5DDD\u5824\u9632\u3068\u306E\u4EA4\u5DEE\u70B9<br>\u4E8B\u6545\u4EF6\u65704\u56DE\",\r\n        lat: 35.918849,\r\n        lng: 136.174519,\r\n      },\r\n      {\r\n        img: \"2.png\",\r\n        txt:\r\n          \"\u585A\u753A\u4EA4\u5DEE\u70B9\u3068\u56FD\u9AD8\u5C0F\u5B66\u6821\u306E\u3061\u3087\u3046\u3069\u4E2D\u9593\u5730\u70B9\u306B\u3042\u308B\u4EA4\u5DEE\u70B9<br>\u4E8B\u6545\u4EF6\u65702\u56DE\",\r\n        lat: 35.912397,\r\n        lng: 136.188945,\r\n      },\r\n      {\r\n        img: \"3.png\",\r\n        txt: \"\u6B66\u751F\u9AD8\u6821\u6821\u5EAD\u306E\u6771\u5074<br>\u4E8B\u6545\u4EF6\u65702\u56DE\",\r\n        lat: 35.910282,\r\n        lng: 136.177118,\r\n      },\r\n    ];\r\n    for (const d of data) {\r\n      const icon = new LeafIcon({\r\n        iconUrl: d.img,\r\n      });\r\n      new L.Marker([d.lat, d.lng], { icon })\r\n        .bindPopup(d.txt)\r\n        .addTo(map);\r\n    }\r\n  };\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
